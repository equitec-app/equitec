<div class="container">

  <h2>Importar clientes</h2>
  <%= form_tag import_customers_path, multipart: true do %>
    <%= file_field_tag :file %>
    <%= submit_tag "Import" %>
  <% end %>

  <h3 class="azul-oscuro section-title">Clientes existentes: </h3>
  <%= form_tag(search_customers_path, remote: true) do %>
    <div class="search-form-container">
      <%= text_field_tag( :concept, nil, class:'middle-input registration-input', placeholder: 'Nombre de la empresa' )%>
      <%= submit_tag 'Buscar', class: 'search-button'  %>
    </div>
  <% end %>

  <div class="customer_table_container">
    <%=render 'customers/customers_table'%>
  </div>

  <h3 class="azul-oscuro section-title">Plantas por clientes: </h3>

  <%= form_tag(search_power_plants_path, remote: true) do %>
    <div class="search-form-container">
      <%= text_field_tag( :concept, nil, class:'middle-input registration-input', placeholder: 'Información de la planta' )%>
      <%= submit_tag 'Buscar', class: 'search-button'  %>
    </div>
  <% end %>

  <div class="customers_with_power_plants_table_container">
    <%=render 'customers/customers_with_power_plants_table'%>
  </div>


  <h3 class="azul-oscuro section-title">UPSs por clientes: </h3>

  <table class="table ">
    <thead>
      <tr>
        <th scope="col"><span class="azul-oscuro">Clente</span></th>
        <th scope="col"><span class="azul-oscuro">Sede</span></th>
        <th scope="col"><span class="azul-oscuro">Marca</span></th>
        <th scope="col"><span class="azul-oscuro">Modelo</span></th>
        <th scope="col"><span class="azul-oscuro">Potencia</span></th>
        <th scope="col"><span class="azul-oscuro">Detalles</span></th>
      </tr>
    </thead>
    <tbody>
      <%@customers_with_ups.each do |customer|%>


        <tr>
          <th rowspan="<%=number_of_rowspan_ups(customer)%>"><%=customer.username%></th>

          <%customer.headquarters.each do |headquarter|%>
            <%if headquarter.ups.size > 0%>
              <td rowspan="<%=headquarter.ups.size + 2%>"><%=headquarter.city + ", " + headquarter.direction%></td>
              <tr>
                <%headquarter.ups.each do |ups|%>
                <tr>
                  <td><%=ups.trademark%></td>
                  <td><%=ups.model%></td>
                  <td><%=ups.power%></td>
                  <td><%=link_to "Ver", customer_up_path(customer.id, ups.id) %></td>
                </tr>
                <%end%>
              </tr>
            <%end%>
          <%end%>
        </tr>
      <%end%>

    </tbody>
  </table>

  <!-- <h3 class="azul-oscuro section-title">Plantas por clientes: </h3>

  <table class="table ">
    <thead>
      <tr>
        <th scope="col"><span class="azul-oscuro">Clente</span></th>
        <th scope="col"><span class="azul-oscuro">Sede</span></th>
        <th scope="col"><span class="azul-oscuro">Marca</span></th>
        <th scope="col"><span class="azul-oscuro">Modelo</span></th>
        <th scope="col"><span class="azul-oscuro">Detalles</span></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th rowspan="8">Bancolombia 8</th>

        <td rowspan="4">Medellín 4</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>

        <td rowspan="4">Medellín 4</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>

      </tr>
      <tr>
        <th rowspan="5">Bancolombia 5</th>

        <td rowspan="5">Medellín 5</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>
      </tr>

      <tr>
        <th rowspan="3">Bancolombia 3</th>

        <td rowspan="3">Medellín 3</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>
      </tr>
      <tr>
        <th rowspan="8">Bancolombia 8</th>

        <td rowspan="4">Medellín 4</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>

        <td rowspan="4">Medellín 4</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>

      </tr>
      <tr>
        <th rowspan="18">Bancolombia 18</th>

        <td rowspan="3">Medellín 3</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>

        <td rowspan="4">Medellín 4</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>

        <td rowspan="5">Medellín 5</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>

        <td rowspan="6">Medellín 6</td>
        <tr>
          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>

          <tr>
            <td>Caterpilla</td>
            <td>js300</td>
            <td>dddd></td>
          </tr>
        </tr>

      </tr>
    </tbody>
  </table> -->

</div>
